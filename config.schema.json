{
  "pluginAlias": "HomebridgeShortcutsButtons",
  "pluginType": "platform",
  "singular": true,
  "schema": {
    "type": "object",
    "properties": {
      "name": {
        "type": "string",
        "description": "Name of the platform bridge.",
        "default": "Shortcuts Buttons"
      },
      "accessoryName": {
        "type": "string",
        "description": "Display name of the accessory.",
        "default": "Shortcuts"
      },
      "displayButtonsAs": {
        "type": "string",
        "enum": ["Outlet", "Switch"],
        "description": "Display the buttons services as outlets or as switches.",
        "default": "Outlet"
      },
      "buttons": {
        "type": "array",
        "description": "List of buttons configuration objects.",
        "uniqueItems": true,
        "minItems": 1,
        "items": {
          "type": "object",
          "properties": {
            "name": {
              "type": "string",
              "description": "Display name of the button."
            },
            "shortcut": {
              "type": "string",
              "description": "Name of the Apple Shortcut to trigger, as displayed in the Shortcuts app. The machine running Homebridge must have access to it (i.e. be logged to the correct iCloud account)."
            }
          },
          "required": ["name", "shortcut"]
        }
      },
      "waitForShortcutResult": {
        "type": "boolean",
        "description": "Wait for the triggered Shortcut to complete to invoke a callback.",
        "default": true
      },
      "shortcutResultCallback": {
        "type": "object",
        "description": "All values in this section are ignored if `Wait For Shortcut Result` is toggled off.",
        "properties": {
          "callbackServerHostname": {
            "type": "string",
            "description": "IP address or hostname to expose the internal x-callback-url server (i.e. must be accessible from a browser).",
            "default": "127.0.0.1"
          },
          "callbackServerPort": {
            "type": "number",
            "description": "Available port number to run the internal x-callback-url server.",
            "default": 59845
          },
          "callbackCustomCommand": {
            "type": "string",
            "description": "By default (field left empty), after the Shortcut completes, a notification is shown on the host running Homebrige, and a relevant sound effect (\"Glass\" for success, \"Sosumi\" for failure) is played. \n\nIf any value is present in this field, after the Apple Shortcut completes the service will treat this value as a unix command and will try to run it via node `child_process.exec` (unsanitised, at your own risk). \nIn your command you have at your disposal the following environment variables: \n- SHORTCUT_NAME: string \n- SHORTCUT_RESULT: \"success\" | \"error\" | \"cancel\""
          }
        },
        "required": ["callbackServerHostname", "callbackServerPort"]
      }
    },
    "required": [
      "name",
      "accessoryName",
      "displayButtonsAs",
      "buttons",
      "waitForShortcutResult",
      "shortcutResultCallback"
    ]
  }
}
