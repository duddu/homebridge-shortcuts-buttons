{
  "pluginAlias": "HomebridgeShortcutsButtons",
  "pluginType": "platform",
  "singular": true,
  "schema": {
    "type": "object",
    "properties": {
      "name": {
        "type": "string",
        "description": "Name of the platform bridge.",
        "default": "Homebridge Shortcuts Buttons"
      },
      "accessoryName": {
        "type": "string",
        "description": "Display name of the accessory.",
        "default": "Shortcuts"
      },
      "serviceType": {
        "type": "string",
        "title": "Display buttons as",
        "enum": ["Outlet", "Switch"],
        "description": "Display the buttons services as outlets or as switches.",
        "default": "Outlet"
      },
      "services": {
        "type": "array",
        "title": "Buttons",
        "description": "List of buttons configuration objects.",
        "uniqueItems": true,
        "minItems": 1,
        "items": {
          "type": "object",
          "properties": {
            "serviceName": {
              "type": "string",
              "title": "Button name",
              "description": "A name to display for this button."
            },
            "shortcutName": {
              "type": "string",
              "title": "Shortcut name",
              "description": "Name of the Apple Shortcut to trigger, as displayed in the Shortcuts app. The machine running Homebridge must have access to it (i.e. be logged to the correct iCloud account)."
            }
          },
          "required": ["serviceName", "shortcutName"]
        }
      },
      "callbackServerEnabled": {
        "type": "boolean",
        "title": "Enable Callback Command",
        "description": "Whether the plugin should execute a command once a shortcut run completes. This determines whether to run an internal x-callback-url http server in the background.<br>\nAll fields below depend on this one: any value inserted in the following inputs will be ignored if this one field is set to false.",
        "default": true
      },
      "callbackServerHostname": {
        "type": "string",
        "description": "IP address or hostname to expose the internal x-callback-url http server (must be accessible from a browser on the machine running Homebridge).",
        "default": "127.0.0.1"
      },
      "callbackServerPort": {
        "type": "number",
        "description": "A free port number to be used by the internal x-callback-url http server.",
        "default": 63963
      },
      "callbackServerProtocol": {
        "type": "string",
        "enum": ["http", "https"],
        "description": "If you access other Homebridge services (e.g. UI) behind a reverse proxy with TLS certificate installed, you may want to access the x-callback-url server via https as well.",
        "default": "http"
      },
      "callbackCustomCommand": {
        "type": "string",
        "description": "By default, after the shortcut completion, a notification with a brief summary is displayed on the host running Homebrige (with sound effect 'Glass' for success and 'Sosumi' for failure).<br>\n<br>\nIf you input any value here it will be treated as a unix command and executed via node's `child_process.exec` (at your own risk).<br>\nIn your command you have at your disposal the following environment variables:<br>\n- SHORTCUT_NAME: string<br>\n- SHORTCUT_RESULT: \"success\" | \"error\" | \"cancel\""
      },
      "callbackCommandTimeout": {
        "type": "number",
        "description": "The time in milliseconds that the x-callback-url server should wait for the callback command execution to complete before timing out.",
        "default": 5000
      }
    },
    "required": [
      "name",
      "accessoryName",
      "serviceType",
      "services",
      "callbackServerEnabled",
      "callbackServerHostname",
      "callbackServerPort",
      "callbackServerProtocol",
      "callbackCommandTimeout"
    ]
  }
}
